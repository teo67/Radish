# TESTING SUITE FOR BASIC RADISH FUNCTIONALITY #

dig Test plant class {
    dig name
    dig function
    dig constructor plant tool(_name, _function) {
        this.name plant _name
        this.function plant _function
    }
}

dig tests plant [
    new Test("declare variable", tool() {
        dig a plant 0
        harvest a == 0
    }), 
    new Test("avoid pointers", tool() {
        dig a plant 0
        dig b plant a
        a plant 1
        harvest b == 0
    }), 
    new Test("array pointers", tool() {
        dig a plant []
        dig b plant a
        a.push(1)
        harvest b[0] == 1
    }),
    new Test("object pointers", tool() {
        dig a plant {}
        dig b plant a
        a["x"] plant 1
        harvest b.x == 1
    }),
    new Test("getters and setters", tool() {
        dig b plant 0
        dig a {
            plant {
                b plant input
            }
            harvest {
                harvest b
            }
        }
        a plant 1
        harvest b == 1 && a == 1
    }) 
]

for(dig i plant 0, i < tests.length, i++) {
    if(tests[i].function()) {
        holler(tests[i].name + " PASSED")
    } else {
        throw tests[i].name + " FAILED"
    }
}

harvest all